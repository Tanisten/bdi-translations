# Используем официальный образ Python
FROM python:3.8

# Устанавливаем рабочую директорию
WORKDIR /app

# Копируем файл requirements.txt (если он есть) и устанавливаем зависимости
COPY requirements.txt ./
RUN pip install --no-cache-dir -r requirements.txt

# Копируем все остальные файлы в контейнер
COPY . .

# Команда для запуска приложения
CMD ["python", "app.py"]



@app.route('/run', methods=['POST'])
def run_code():
    code = request.json.get('code')
    result = subprocess.run(['docker', 'run', '--rm', 'python-runner', 'python', '-c', code], 
                            capture_output=True, text=True)
    return jsonify({'output': result.stdout, 'error': result.stderr})






docker build -t python-runner .





docker run -p 5000:5000 python-runner
